name: stream
on:
  pull_request:
jobs:
  load:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Setup PHP
      uses: shivammathur/setup-php@v2
      with:
        php-version: 8.2
    - name: Install dependencies
      run: composer install --no-interaction
    - name: Load stream
      run: bin/console amoscato:stream:load -v
      env:
        AMOSCATO_DATABASE_HOST: ${{ secrets.AMOSCATO_DATABASE_HOST }}
        AMOSCATO_DATABASE_NAME: ${{ secrets.AMOSCATO_DATABASE_NAME }}
        AMOSCATO_DATABASE_USER: ${{ secrets.AMOSCATO_DATABASE_USER }}
        AMOSCATO_DATABASE_PASSWORD: ${{ secrets.AMOSCATO_DATABASE_PASSWORD }}
        AMOSCATO_DATABASE_PORT: ${{ secrets.AMOSCATO_DATABASE_PORT }}
